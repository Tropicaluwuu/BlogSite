{% extends "base.html" %}

{% block content %}
  <h2>All Posts</h2>

  {% if posts %}
    {% for post in posts %}
      <article style="margin-bottom: 24px;">
        <h3>{{ post.Title }}</h3>
        <p>
          <small>
            by {{ post.author.Username if post.author else "Unknown" }}
            • {{ post.CreatedAt.strftime('%Y-%m-%d %H:%M') if post.CreatedAt else '' }}
          </small>
        </p>

        <p>{{ post.Content }}</p>

        <p>
          <a href="{{ url_for('view_post', id=post.PostID) }}">View details & comments</a> |
          <a href="{{ url_for('edit_post', id=post.PostID) }}">Edit</a> |
          <a href="{{ url_for('delete_post', id=post.PostID) }}"
             onclick="return confirm('Delete this post?');">
            Delete
          </a>
        </p>
        <hr>
      </article>
<p>
  <small>
    by {{ post.author.Username if post.author else "Unknown" }}
    • {{ post.CreatedAt.strftime('%Y-%m-%d %H:%M') if post.CreatedAt else '' }}
    • ❤️ {{ post.likes | length }} likes
  </small>
</p>

    {% endfor %}
  {% else %}
    <p><em>No posts yet. Try adding one!</em></p>
  {% endif %}
{% endblock %}
